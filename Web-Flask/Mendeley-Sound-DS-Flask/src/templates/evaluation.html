{% extends "layout.html" %}
{% block content %}

<style>
/* Evaluation Page Styling */
.eval-container {
    max-width: 1200px;
    margin: auto;
    padding: 25px;
}

.eval-title {
    text-align: center;
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 20px;
    color: #222;
}

.eval-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.eval-card {
    background: #ffffff;
    border-radius: 14px;
    padding: 20px;
    box-shadow: 0px 2px 8px rgba(0,0,0,0.08);
    text-align: center;
    border-left: 4px solid #2a71d0;
}

.eval-card h3 {
    font-size: 15px;
    font-weight: 600;
    color: #444;
    margin-bottom: 6px;
}

.eval-card p {
    font-size: 22px;
    font-weight: 700;
    color: #111;
    margin: 0;
}

.eval-section {
    background: #ffffff;
    border-radius: 14px;
    padding: 20px;
    margin-bottom: 30px;
    box-shadow: 0px 2px 8px rgba(0,0,0,0.08);
}

.eval-section h3 {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 15px;
    color: #222;
}

.conf-img {
    width: 100%;
    max-width: 500px;
    display: block;
    margin: auto;
    border-radius: 10px;
    box-shadow: 0px 1px 6px rgba(0,0,0,0.2);
}

.report-table {
    width: 100%;
    border-collapse: collapse;
    background: #ffffff;
    color: #222;                     /* strong dark text */
    font-size: 15px;
    font-weight: 500;
    border: 1px solid #ddd;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    border-radius: 8px;
    overflow: hidden;
}

/* header */
.report-table th {
    background: #f1f3f5;             /* light grey header */
    color: #000;
    padding: 12px;
    text-align: center;
    font-weight: 600;
    border-bottom: 1px solid #ccc;
}

/* data rows */
.report-table td {
    padding: 10px;
    text-align: center;
    border-bottom: 1px solid #eee;
    color: #111;                     /* darker text */
}

/* last row border removal */
.report-table tr:last-child td {
    border-bottom: none;
}

/* zebra rows */
.report-table tr:nth-child(even) {
    background: #fafafa;
}

/* highlight ADHD row */
.report-table tr:nth-child(3) {
    background: #ffeef0;             /* light red tint */
}

/* Smooth hover */
.report-table tr:hover {
    background: #e8f4ff;
    transition: 0.2s;
}

</style>

<div class="eval-container">

    <div class="eval-title">ADHD  Model Evaluation</div>

    <!-- METRIC CARDS -->
    <div class="eval-cards">
        <div class="eval-card">
            <h3>Accuracy</h3>
            <p>{{ "%.4f"|format(accuracy) }}</p>
        </div>
        <div class="eval-card">
            <h3>Precision</h3>
            <p>{{ "%.4f"|format(precision) }}</p>
        </div>
        <div class="eval-card">
            <h3>Recall</h3>
            <p>{{ "%.4f"|format(recall) }}</p>
        </div>
        <div class="eval-card">
            <h3>F1 Score</h3>
            <p>{{ "%.4f"|format(f1) }}</p>
        </div>
        <div class="eval-card">
            <h3>ROC-AUC</h3>
            <p>{{ "%.4f"|format(roc) }}</p>
        </div>
    </div>

    <!-- CONFUSION MATRIX -->
    <div class="eval-section">
        <h3>Confusion Matrix</h3>
        <img src="{{ url_for('static', filename='plots/' + cm_image) }}" class="conf-img">
    </div>

    <!-- CLASSIFICATION REPORT -->
    <div class="eval-section">
        <h3 style="margin-top:25px;">Classification Report</h3>

<table class="report-table">
    <tr>
        <th>Class</th>
        <th>Precision</th>
        <th>Recall</th>
        <th>F1-Score</th>
        <th>Support</th>
    </tr>

    {% for cls, vals in report.items() %}
        {% if vals.precision is defined %}
        <tr>
            <td>{{ cls }}</td>
            <td>{{ "%.4f"|format(vals["precision"]) }}</td>
            <td>{{ "%.4f"|format(vals["recall"]) }}</td>
            <td>{{ "%.4f"|format(vals["f1-score"]) }}</td>
            <td>{{ vals["support"]|int }}</td>
        </tr>
        {% endif %}
    {% endfor %}
</table>


    </div>

</div>

{% endblock %}
